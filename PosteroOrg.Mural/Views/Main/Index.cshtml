@model List<Note>

@{
    ViewBag.Title = "Mural";
}

<div id="modal-nota" class="modal">
    <div class="modal-content">
    </div>
    <div class="modal-footer">
        <button class="modal-action modal-close waves-effect waves-red btn-flat">Fechar</button>
    </div>
</div>

@if (Model.Count > 0)
{
    <div class="row">
        @foreach (Note note in Model.OrderByDescending(n => n.DtNote))
        {
            <div class="col s12">
                <p><time class="grey-text text-lighten-1" datetime="@note.DtNote.ToString("u")"></time></p>
                <div class="card">
                    <div class="card-content md-content" style="max-height:25em; overflow-y:auto">
                        @Html.Raw(note.PureContent.MarkdownTransform())
                    </div>
                    <div class="card-action">
                        <a class="open waves-effect btn-flat">Abrir</a>
                    </div>
                </div>
            </div>
        }
    </div>
}
else
{
    <p>Nada aqui.</p>
}

@section Scripts {
    <script>
        $(function () {
            $('.card-action .open').on('click', function openNote() {
                var content = $(this).closest('.card').find('.card-content').html();
                $('#modal-nota .modal-content').html(content);
                $('#modal-nota').openModal();
            });
        });
    </script>
}
